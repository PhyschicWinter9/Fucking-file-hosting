# 5. Environment Setup

## Quick Setup for Different Environments

### Development Environment

#### Local Development Setup

1. **Clone Repository**
   ```bash
   git clone https://github.com/your-username/fucking-file-hosting.git
   cd fucking-file-hosting
   ```

2. **Install Dependencies**
   ```bash
   composer install
   npm install
   ```

3. **Environment Configuration**
   ```bash
   cp .env.example .env
   php artisan key:generate
   ```

4. **Database Setup**
   ```bash
   touch database/database.sqlite
   php artisan migrate
   ```

5. **Start Development Server**
   ```bash
   composer run dev
   ```

#### Development Environment Variables

```env
APP_NAME="Fucking File Hosting (Dev)"
APP_ENV=local
APP_DEBUG=true
APP_URL=http://localhost:8000

DB_CONNECTION=sqlite
DB_DATABASE=database/database.sqlite

MAX_FILE_SIZE_MB=100
DEFAULT_EXPIRATION_DAYS=1
MAX_EXPIRATION_DAYS=30

PRIVACY_MODE=true
RATE_LIMITING=false
```

### Staging Environment

#### Staging Configuration

```env
APP_NAME="Fucking File Hosting (Staging)"
APP_ENV=staging
APP_DEBUG=false
APP_URL=https://staging.yourdomain.com

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_DATABASE=staging_filehosting
DB_USERNAME=staging_user
DB_PASSWORD=secure_password

MAX_FILE_SIZE_MB=50
DEFAULT_EXPIRATION_DAYS=1
MAX_EXPIRATION_DAYS=7

PRIVACY_MODE=true
RATE_LIMITING=true
```

#### Staging Deployment

```bash
# Deploy to staging
git checkout staging
composer install --no-dev --optimize-autoloader
npm run build
php artisan migrate --force
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

### Production Environment

#### Production Configuration

```env
APP_NAME="Fucking File Hosting"
APP_ENV=production
APP_DEBUG=false
APP_URL=https://yourdomain.com

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_DATABASE=filehosting
DB_USERNAME=production_user
DB_PASSWORD=very_secure_password

MAX_FILE_SIZE_MB=100
DEFAULT_EXPIRATION_DAYS=1
MAX_EXPIRATION_DAYS=365

PRIVACY_MODE=true
RATE_LIMITING=true

# Security
SESSION_SECURE_COOKIE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# Caching
CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

# Mail (optional)
MAIL_MAILER=smtp
MAIL_HOST=smtp.yourdomain.com
MAIL_PORT=587
MAIL_USERNAME=noreply@yourdomain.com
MAIL_PASSWORD=mail_password
MAIL_ENCRYPTION=tls
```

#### Production Deployment

```bash
# Production deployment
git checkout main
composer install --no-dev --optimize-autoloader
npm run build
php artisan migrate --force
php artisan config:cache
php artisan route:cache
php artisan view:cache
php artisan storage:link
```

### Docker Environment

#### Dockerfile

```dockerfile
FROM php:8.2-fpm

# Install dependencies
RUN apt-get update && apt-get install -y \
    git \
    curl \
    libpng-dev \
    libonig-dev \
    libxml2-dev \
    zip \
    unzip

# Install PHP extensions
RUN docker-php-ext-install pdo_mysql mbstring exif pcntl bcmath gd

# Install Composer
COPY --from=composer:latest /usr/bin/composer /usr/bin/composer

# Set working directory
WORKDIR /var/www

# Copy application
COPY . .

# Install dependencies
RUN composer install --no-dev --optimize-autoloader

# Set permissions
RUN chown -R www-data:www-data /var/www
RUN chmod -R 755 /var/www/storage

EXPOSE 9000
CMD ["php-fpm"]
```

#### Docker Compose

```yaml
version: '3.8'

services:
  app:
    build: .
    container_name: filehosting-app
    restart: unless-stopped
    working_dir: /var/www
    volumes:
      - ./:/var/www
    networks:
      - filehosting

  webserver:
    image: nginx:alpine
    container_name: filehosting-nginx
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./:/var/www
      - ./docker/nginx:/etc/nginx/conf.d
    networks:
      - filehosting

  database:
    image: mysql:8.0
    container_name: filehosting-db
    restart: unless-stopped
    environment:
      MYSQL_DATABASE: filehosting
      MYSQL_ROOT_PASSWORD: root_password
      MYSQL_USER: filehosting_user
      MYSQL_PASSWORD: user_password
    volumes:
      - dbdata:/var/lib/mysql
    networks:
      - filehosting

  redis:
    image: redis:alpine
    container_name: filehosting-redis
    restart: unless-stopped
    networks:
      - filehosting

networks:
  filehosting:
    driver: bridge

volumes:
  dbdata:
    driver: local
```

### Environment-Specific Features

#### Development Features

- Debug toolbar enabled
- Detailed error messages
- Hot reloading for assets
- SQLite for simplicity
- No rate limiting

#### Staging Features

- Production-like environment
- Limited file sizes
- Short expiration times
- Rate limiting enabled
- Error logging

#### Production Features

- Maximum security
- Full feature set
- Comprehensive logging
- Performance optimization
- Monitoring integration

### Environment Variables Reference

| Variable | Development | Staging | Production | Description |
|----------|-------------|---------|------------|-------------|
| `APP_DEBUG` | `true` | `false` | `false` | Enable debug mode |
| `MAX_FILE_SIZE_MB` | `100` | `50` | `100` | Maximum file size |
| `RATE_LIMITING` | `false` | `true` | `true` | Enable rate limiting |
| `PRIVACY_MODE` | `true` | `true` | `true` | Privacy features |
| `SESSION_SECURE_COOKIE` | `false` | `true` | `true` | HTTPS-only cookies |

### Testing Environments

#### Unit Testing

```bash
# Run tests
php artisan test

# Run with coverage
php artisan test --coverage
```

#### Integration Testing

```bash
# Run integration tests
php artisan test --testsuite=Feature
```

#### Browser Testing

```bash
# Install browser testing dependencies
npm install --save-dev @playwright/test

# Run browser tests
npm run test:browser
```