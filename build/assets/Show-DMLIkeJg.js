import{r as f,j as e,H as N,L as h}from"./app-DoPWTTfF.js";import{B as D,D as R,C as p}from"./download-BT2AyQ13.js";import{B as n}from"./button-ve-6vPrQ.js";import{C as a,a as l,b as i,c as x,d as r}from"./card-B40xIBSB.js";import{u as z}from"./useToast-DH2i-Qux.js";import{H as S}from"./hard-drive-CtOjtOYp.js";import{F as U}from"./file-text-CSq2mXiU.js";import{c as v}from"./createLucideIcon-DlXnowyG.js";import{C as I,S as M}from"./share-2-pFuKHlqv.js";import{E}from"./eye-BWBNtsiV.js";import{T as g}from"./trash-2-Dz2C-K4b.js";/* empty css            */import"./index-C87LH4oZ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$=v("Calendar",L);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],b=v("QrCode",Q);function J({file:s}){const{toast:d}=z(),[u,j]=f.useState(!1),[w,y]=f.useState(!1),m=async(t,c)=>{try{await navigator.clipboard.writeText(t),d({title:"Copied!",description:`${c} copied to clipboard`,variant:"default"})}catch{d({title:"Copy failed",description:"Failed to copy to clipboard",variant:"destructive"})}},k=async()=>{if(!s.can_delete||!s.delete_token){d({title:"Cannot delete",description:"You do not have permission to delete this file",variant:"destructive"});return}if(confirm("Are you sure you want to delete this file? This action cannot be undone.")){j(!0);try{const c=await(await fetch(`/api/file/${s.file_id}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-Delete-Token":s.delete_token,"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).json();if(c.success)d({title:"File deleted",description:"The file has been permanently deleted",variant:"default"}),window.location.href="/";else throw new Error(c.error?.message||"Failed to delete file")}catch(t){d({title:"Delete failed",description:t instanceof Error?t.message:"Failed to delete file",variant:"destructive"})}finally{j(!1)}}},o=t=>new Date(t).toLocaleString(),_=t=>t.startsWith("image/")?"🖼️":t.startsWith("video/")?"🎥":t.startsWith("audio/")?"🎵":t==="application/pdf"?"📄":t.includes("zip")||t.includes("rar")||t.includes("7z")?"📦":t.includes("text/")||t.includes("json")||t.includes("xml")?"📝":"📁",C=t=>["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","application/pdf","text/plain","text/html","text/css","text/javascript","application/json","application/xml","text/xml","video/mp4","video/webm","video/ogg","audio/mpeg","audio/wav","audio/ogg","audio/mp4"].includes(t),F=t=>`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(t)}`;return s.is_expired?e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"File Not Found"}),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:e.jsxs(a,{className:"w-full max-w-md",children:[e.jsxs(l,{className:"text-center",children:[e.jsx(i,{className:"text-destructive",children:"File Expired"}),e.jsx(x,{children:"This file has expired and is no longer available for download."})]}),e.jsx(r,{className:"text-center",children:e.jsx(h,{href:"/",children:e.jsx(n,{children:"Upload New File"})})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{title:`${s.original_name} - File Info`}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-border bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60",children:e.jsx("div",{className:"container mx-auto px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{href:"/",className:"bg-gradient-primary bg-clip-text text-lg font-bold text-transparent sm:text-xl lg:text-2xl",children:"Fucking File"}),e.jsx(h,{href:"/",children:e.jsxs(n,{variant:"outline",size:"sm",className:"text-xs sm:text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:"Upload New File"}),e.jsx("span",{className:"sm:hidden",children:"Upload"})]})})]})})}),e.jsx("main",{className:"container mx-auto px-4 py-6 sm:py-8",children:e.jsxs("div",{className:"mx-auto max-w-4xl space-y-4 sm:space-y-6",children:[e.jsx(a,{children:e.jsx(l,{children:e.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-start sm:justify-between sm:space-y-0",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 text-3xl sm:text-4xl",children:_(s.mime_type)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(i,{className:"text-lg break-all sm:text-2xl",children:s.original_name}),e.jsxs(x,{className:"mt-2 flex flex-col space-y-2 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(S,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:s.human_file_size})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(U,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.mime_type})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx($,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"text-xs sm:text-sm",children:o(s.created_at)})]})]})]})]}),s.expires_at&&e.jsxs(D,{variant:new Date(s.expires_at)<new Date(Date.now()+1440*60*1e3)?"destructive":"secondary",className:"self-start",children:[e.jsx(I,{className:"mr-1 h-3 w-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Expires "}),e.jsx("span",{className:"text-xs",children:o(s.expires_at)})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(a,{className:"cursor-pointer transition-shadow hover:shadow-lg",onClick:()=>window.open(s.download_url,"_blank"),children:e.jsxs(r,{className:"p-3 text-center sm:p-4 lg:p-6",children:[e.jsx(R,{className:"mx-auto mb-1.5 h-6 w-6 text-primary sm:mb-2 sm:h-8 sm:w-8"}),e.jsx("h3",{className:"text-sm font-semibold sm:text-base",children:"Download"}),e.jsx("p",{className:"text-xs text-muted-foreground sm:text-sm",children:"Download file"})]})}),C(s.mime_type)&&s.preview_url&&e.jsx(a,{className:"cursor-pointer transition-shadow hover:shadow-lg",onClick:()=>window.open(s.preview_url,"_blank"),children:e.jsxs(r,{className:"p-6 text-center",children:[e.jsx(E,{className:"mx-auto mb-2 h-8 w-8 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Preview"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View in browser"})]})}),e.jsx(a,{className:"cursor-pointer transition-shadow hover:shadow-lg",onClick:()=>m(s.download_url,"Download link"),children:e.jsxs(r,{className:"p-6 text-center",children:[e.jsx(p,{className:"mx-auto mb-2 h-8 w-8 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Copy Link"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Copy download URL"})]})}),e.jsx(a,{className:"cursor-pointer transition-shadow hover:shadow-lg",onClick:()=>y(!w),children:e.jsxs(r,{className:"p-6 text-center",children:[e.jsx(b,{className:"mx-auto mb-2 h-8 w-8 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"QR Code"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share via QR"})]})})]}),w&&e.jsxs(a,{children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsx("span",{children:"QR Code"})]}),e.jsx(x,{children:"Scan this QR code to download the file on mobile devices"})]}),e.jsxs(r,{className:"text-center",children:[e.jsx("img",{src:F(s.download_url),alt:"QR Code for file download",className:"mx-auto rounded-lg border"}),e.jsx("p",{className:"mt-4 text-sm break-all text-muted-foreground",children:s.download_url})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs(a,{children:[e.jsx(l,{children:e.jsx(i,{children:"File Information"})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"File ID:"}),e.jsx("span",{className:"font-mono text-sm break-all",children:s.file_id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Size:"}),e.jsxs("span",{children:[s.human_file_size," (",s.file_size.toLocaleString()," bytes)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{children:s.mime_type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Uploaded:"}),e.jsx("span",{children:o(s.created_at)})]}),s.expires_at&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Expires:"}),e.jsx("span",{children:o(s.expires_at)})]})]})]}),e.jsxs(a,{children:[e.jsx(l,{children:e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{children:"Share Options"})]})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Download URL"}),e.jsxs("div",{className:"mt-1 flex",children:[e.jsx("input",{type:"text",value:s.download_url,readOnly:!0,placeholder:"Download",className:"flex-1 rounded-l-md border border-border bg-muted px-3 py-2 text-sm"}),e.jsx(n,{variant:"outline",size:"sm",className:"rounded-l-none",onClick:()=>m(s.download_url,"Download URL"),children:e.jsx(p,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Info Page URL"}),e.jsxs("div",{className:"mt-1 flex",children:[e.jsx("input",{type:"text",value:s.info_url,readOnly:!0,placeholder:"Info URL",className:"flex-1 rounded-l-md border border-border bg-muted px-3 py-2 text-sm"}),e.jsx(n,{variant:"outline",size:"sm",className:"rounded-l-none",onClick:()=>m(s.info_url,"Info page URL"),children:e.jsx(p,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"mb-3 text-sm font-medium text-muted-foreground",children:"Share on social media"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>window.open(`https://twitter.com/intent/tweet?text=Check out this file: ${encodeURIComponent(s.original_name)}&url=${encodeURIComponent(s.download_url)}`,"_blank"),children:"Twitter"}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(s.download_url)}`,"_blank"),children:"Facebook"}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>window.open(`https://wa.me/?text=${encodeURIComponent(`Check out this file: ${s.original_name} ${s.download_url}`)}`,"_blank"),children:"WhatsApp"})]})]})]})]})]}),s.can_delete&&e.jsxs(a,{className:"border-destructive/20",children:[e.jsxs(l,{children:[e.jsxs(i,{className:"flex items-center space-x-2 text-destructive",children:[e.jsx(g,{className:"h-5 w-5"}),e.jsx("span",{children:"Delete File"})]}),e.jsx(x,{children:"Permanently delete this file. This action cannot be undone."})]}),e.jsx(r,{children:e.jsx(n,{variant:"destructive",onClick:k,disabled:u,className:"w-full sm:w-auto",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-b-2 border-white"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Delete File"]})})})]})]})}),e.jsx("footer",{className:"mt-16 border-t border-border bg-card",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center text-muted-foreground",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," Fucking File. Fast, private, and secure file hosting."]})})})})]})]})}export{J as default};
