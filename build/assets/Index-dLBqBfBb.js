import{r as g,j as e}from"./app-B0UezPh0.js";import{c as Q,a as k,B as F}from"./createLucideIcon-mwQGNZvO.js";import{C as M}from"./card-BwCjyKxq.js";import{u as oe}from"./useToast-DriJkmk3.js";import{c as Te}from"./index-DbcRsQzH.js";import{P as ve}from"./index-CpQax8tn.js";import{C as q,U as Le}from"./upload-Ct8OVkA0.js";import{C as ie,E as Oe,S as qe}from"./share-2-DjqUZ--j.js";import{L as Ve}from"./loader-circle-DJC-IFd9.js";import{L as We}from"./label-DqbraZQ7.js";import{S as He,b as Ke,c as Xe,d as Ge,e as Z,L as Je,a as Ze}from"./select-DYNFUuyN.js";import{B as Ye,C as we,D as he}from"./download-DpDzNCnx.js";import{X as fe}from"./x-HWp7KucV.js";/* empty css            */import"./index-D33Nw6H6.js";import"./Combination-Ce6w2jHI.js";import"./index-DBIOWztW.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ge=Q("CircleAlert",Qe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ne=Q("ExternalLink",es);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],ce=Q("File",ss);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],as=Q("Zap",ts);var de="Progress",me=100,[rs,Is]=Te(de),[ls,ns]=rs(de),ye=g.forwardRef((t,n)=>{const{__scopeProgress:N,value:h=null,max:d,getValueLabel:j=is,...p}=t;(d||d===0)&&!je(d)&&console.error(os(`${d}`,"Progress"));const m=je(d)?d:me;h!==null&&!Ne(h,m)&&console.error(cs(`${h}`,"Progress"));const i=Ne(h,m)?h:null,y=Y(i)?j(i,m):void 0;return e.jsx(ls,{scope:N,value:i,max:m,children:e.jsx(ve.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":Y(i)?i:void 0,"aria-valuetext":y,role:"progressbar","data-state":Se(i,m),"data-value":i??void 0,"data-max":m,...p,ref:n})})});ye.displayName=de;var be="ProgressIndicator",ke=g.forwardRef((t,n)=>{const{__scopeProgress:N,...h}=t,d=ns(be,N);return e.jsx(ve.div,{"data-state":Se(d.value,d.max),"data-value":d.value??void 0,"data-max":d.max,...h,ref:n})});ke.displayName=be;function is(t,n){return`${Math.round(t/n*100)}%`}function Se(t,n){return t==null?"indeterminate":t===n?"complete":"loading"}function Y(t){return typeof t=="number"}function je(t){return Y(t)&&!isNaN(t)&&t>0}function Ne(t,n){return Y(t)&&!isNaN(t)&&t<=n&&t>=0}function os(t,n){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${n}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${me}\`.`}function cs(t,n){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${n}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${me} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ds=ye,ms=ke;function us({className:t,value:n,...N}){return e.jsx(ds,{"data-slot":"progress",className:k("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...N,children:e.jsx(ms,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(n||0)}%)`}})})}const Ce=({value:t,status:n="idle",error:N,showPercentage:h=!0,animated:d=!0,label:j,info:p,size:m="md",variant:i="default",className:y,preserveProgressOnError:P=!0,onAnimationComplete:s})=>{const[f,U]=g.useState(0),[C,_]=g.useState(!1);g.useEffect(()=>{if(!d){U(t);return}const $=n==="error"&&!P?0:t;if(f===$)return;_(!0);const E=f,H=$-E,K=Math.abs(H)*10,R=Date.now(),T=()=>{const X=Date.now()-R,A=Math.min(X/K,1),se=1-Math.pow(1-A,3),G=E+H*se;U(Math.round(G)),A<1?requestAnimationFrame(T):(_(!1),s?.())};requestAnimationFrame(T)},[t,d,f,n,P,s]);const D=()=>{switch(n){case"loading":return e.jsx(Ve,{className:"h-4 w-4 animate-spin"});case"success":return e.jsx(q,{className:"h-4 w-4 text-green-500"});case"error":return e.jsx(ge,{className:"h-4 w-4 text-destructive"});case"paused":return e.jsx(ie,{className:"h-4 w-4 text-yellow-500"});default:return null}},I=()=>{if(n==="error")return"bg-destructive";if(n==="success")return"bg-green-500";if(n==="paused")return"bg-yellow-500";switch(i){case"success":return"bg-green-500";case"warning":return"bg-yellow-500";case"destructive":return"bg-destructive";default:return"bg-primary"}},b=(()=>{switch(m){case"sm":return{container:"space-y-1",progress:"h-1",text:"text-xs"};case"lg":return{container:"space-y-3",progress:"h-3",text:"text-base"};default:return{container:"space-y-2",progress:"h-2",text:"text-sm"}}})(),ee=I(),W=D();return e.jsxs("div",{className:k(b.container,y),children:[(j||W||h)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[W,j&&e.jsx("span",{className:k("font-medium",b.text),children:j})]}),h&&e.jsxs("span",{className:k("font-mono font-medium tabular-nums",b.text,n==="error"&&"text-destructive",n==="success"&&"text-green-500"),children:[f,"%"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(us,{value:f,className:k(b.progress,"transition-all duration-300",d&&C&&"transition-none")}),e.jsx("div",{className:k("progress-indicator absolute top-0 left-0 h-full rounded-full transition-all duration-300",ee,d&&C&&"transition-none"),style:{"--progress-width":`${f}%`}}),n==="loading"&&d&&e.jsx("div",{className:"shimmer-container absolute top-0 left-0 h-full overflow-hidden rounded-full",style:{"--shimmer-width":`${f}%`},children:e.jsx("div",{className:"absolute inset-0 animate-pulse bg-gradient-to-r from-transparent via-white/20 to-transparent"})})]}),n==="error"&&N&&e.jsxs("div",{className:"flex items-start space-x-2 text-destructive",children:[e.jsx(ge,{className:"mt-0.5 h-4 w-4 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:k("font-medium",b.text),children:"Upload Error"}),e.jsx("p",{className:k("text-destructive/80",b.text),children:N}),P&&f>0&&e.jsxs("p",{className:k("mt-1 text-muted-foreground",b.text),children:["Progress preserved - you can retry from ",f,"%"]})]})]}),p&&n!=="error"&&e.jsx("p",{className:k("text-muted-foreground",b.text),children:p}),n==="success"&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:k("font-medium",b.text),children:"Upload completed successfully"})]}),n==="paused"&&e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-600",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx("span",{className:k("font-medium",b.text),children:"Upload paused"})]})]})},ps=({files:t,onNewUpload:n,className:N})=>{const[h,d]=g.useState(new Set),{toast:j}=oe();console.log("UploadSuccess received files:",t);const p=s=>{if(s===0)return"0 Bytes";const f=1024,U=["Bytes","KB","MB","GB"],C=Math.floor(Math.log(s)/Math.log(f));return parseFloat((s/Math.pow(f,C)).toFixed(2))+" "+U[C]},m=async(s,f)=>{try{await navigator.clipboard.writeText(s),d(U=>new Set(U).add(s)),j({title:"Copied!",description:`Download link for ${f} copied to clipboard`,variant:"default"}),setTimeout(()=>{d(U=>{const C=new Set(U);return C.delete(s),C})},3e3)}catch{j({title:"Copy Failed",description:"Failed to copy to clipboard",variant:"destructive"})}},i=async s=>{if(navigator.share)try{await navigator.share({title:`Download ${s.originalName}`,text:`Download ${s.originalName} from Fucking File Hosting`,url:s.downloadUrl})}catch{await m(s.downloadUrl,s.originalName)}else await m(s.downloadUrl,s.originalName)},y=s=>s.startsWith("image/")||s.startsWith("video/")||s.startsWith("audio/")||s==="application/pdf"||s.startsWith("text/"),P=s=>s.startsWith("image/")?"🖼️":s.startsWith("video/")?"🎥":s.startsWith("audio/")?"🎵":s.startsWith("text/")?"📄":s.includes("pdf")?"📕":s.includes("zip")||s.includes("rar")?"📦":"📁";return e.jsxs("div",{className:k("space-y-6",N),children:[e.jsxs(M,{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/20",children:e.jsx(q,{className:"h-8 w-8 text-green-600 dark:text-green-400"})})}),e.jsx("h2",{className:"mb-2 text-2xl font-bold",children:"Upload Complete!"}),e.jsx("p",{className:"text-muted-foreground",children:t.length===1?"Your file has been uploaded successfully":`All ${t.length} files have been uploaded successfully`})]}),e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex min-w-0 flex-1 items-start space-x-3",children:[e.jsx("div",{className:"text-2xl",children:P(s.mimeType)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"truncate font-semibold",children:s.originalName}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsx("span",{children:p(s.fileSize)}),e.jsx("span",{children:s.mimeType}),s.isDuplicate&&e.jsxs(Ye,{variant:"secondary",className:"text-xs",children:["Duplicate - Saved ",p(s.spaceSaved||0)]})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Direct Download Link:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:s.downloadUrl,readOnly:!0,className:"min-w-0 flex-1 rounded-md border border-input bg-muted px-3 py-2 font-mono text-sm"}),e.jsx(F,{variant:"outline",size:"sm",onClick:()=>m(s.downloadUrl,s.originalName),children:h.has(s.downloadUrl)?e.jsx(q,{className:"h-4 w-4 text-green-500"}):e.jsx(we,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(F,{onClick:()=>window.open(s.downloadUrl,"_blank"),className:"flex-1 bg-green-400 shadow-sm hover:bg-green-500 sm:flex-none",children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Download"]}),y(s.mimeType)&&s.previewUrl&&e.jsxs(F,{variant:"outline",onClick:()=>window.open(s.previewUrl,"_blank"),className:"flex-1 sm:flex-none",children:[e.jsx(Oe,{className:"mr-2 h-4 w-4"}),"Preview"]}),e.jsxs(F,{variant:"outline",onClick:()=>i(s),className:"flex-1 sm:flex-none",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Share"]}),e.jsxs(F,{variant:"outline",onClick:()=>window.open(s.infoUrl||`/file/${s.fileId}`,"_blank"),className:"flex-1 sm:flex-none",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"File Info"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm sm:grid-cols-2",children:[e.jsx("div",{className:"rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(he,{className:"mt-0.5 h-4 w-4 text-black"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-black",children:"Download Manager Support"}),e.jsx("p",{className:"text-black",children:"Works with IDM, JDownloader, and other download managers."})]})]})}),s.expiresAt&&e.jsx("div",{className:"rounded-lg bg-red-400 p-3 dark:bg-red-900/20",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ne,{className:"mt-0.5 h-4 w-4 text-black"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-black",children:"Expires"}),e.jsxs("p",{className:"text-black",children:["This file will expire on ",new Date(s.expiresAt).toLocaleDateString()," at"," ",new Date(s.expiresAt).toLocaleTimeString()]})]})]})}),s.deleteToken&&e.jsx("div",{className:"rounded-lg bg-red-50 p-3 sm:col-span-2 dark:bg-red-900/20",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ne,{className:"mt-0.5 h-4 w-4 text-red-600 dark:text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800 dark:text-red-200",children:"Owner Controls"}),e.jsx("p",{className:"text-red-700 dark:text-red-300",children:"You can delete this file anytime from the file info page. Keep this link safe!"})]})]})})]})]})},s.fileId))}),e.jsxs(M,{className:"p-6 text-center",children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold",children:"Upload Another File?"}),e.jsx("p",{className:"mb-4 text-muted-foreground",children:"Upload more files with zero registration and complete privacy."}),e.jsxs(F,{onClick:n,variant:"outline",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Upload New File"]})]}),e.jsx(M,{className:"border-muted bg-muted/20 p-4",children:e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium",children:"🔒 Privacy & Security:"}),e.jsxs("ul",{className:"space-y-1 pl-4",children:[e.jsx("li",{children:"• Files are secured with cryptographic IDs"}),e.jsx("li",{children:"• No IP addresses or personal data logged"}),e.jsx("li",{children:"• Share links only with trusted people"}),e.jsx("li",{children:"• Files auto-delete after expiration"})]})]})})]})},xs=({onUploadStart:t,onUploadProgress:n,onUploadComplete:N,onUploadError:h,maxFileSize:d=100*1024*1024,allowedTypes:j,multiple:p=!0,className:m,disabled:i=!1,showExpirationSelector:y=!0,defaultExpirationDays:P=1,maxConcurrentUploads:s=3,enableBulkMode:f=!0})=>{const[U,C]=g.useState(!1),[_,D]=g.useState([]),[I,V]=g.useState(!1),[b,ee]=g.useState(P),[W,$]=g.useState(0),[,E]=g.useState([]),[H,K]=g.useState(!1),[R,T]=g.useState([]),X=g.useRef(null),{toast:A}=oe(),se=()=>{K(!1),T([]),D([]),V(!1),$(0),E([])},G=g.useCallback(a=>{const r=[];for(const l of a)if(l.size>d&&r.push(`${l.name} exceeds the maximum file size of ${te(d)}`),j&&j.length>0){const x=l.name.split(".").pop()?.toLowerCase(),c=l.type.toLowerCase();j.some(w=>w.startsWith(".")?x===w.slice(1):c.startsWith(w))||r.push(`${l.name} is not an allowed file type`)}return{is_valid:r.length===0,errors:r,max_size:d,allowed_types:j}},[d,j]),te=a=>{if(a===0)return"0 Bytes";const r=1024,l=["Bytes","KB","MB","GB","TB"],x=Math.floor(Math.log(a)/Math.log(r));return parseFloat((a/Math.pow(r,x)).toFixed(2))+" "+l[x]},ue=g.useCallback(async(a,r,l)=>{const c=Math.ceil(a.size/2097152);let v=0;const w=await fetch("/api/upload/init",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({filename:a.name,size:a.size,chunk_size:2097152})});if(!w.ok)throw new Error("Failed to initialize chunked upload");const{session_id:u}=await w.json();for(let z=0;z<c;z++){const O=z*2097152,J=Math.min(O+2097152,a.size),le=a.slice(O,J),S=new FormData;if(S.append("session_id",u),S.append("chunk_index",z.toString()),S.append("chunk",le),!(await fetch("/api/upload/chunk",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:S})).ok)throw new Error(`Failed to upload chunk ${z+1}/${c}`);v++;const Ee=v/c*100,Re=v*2097152;l({progress:Ee,uploadedBytes:Math.min(Re,a.size)})}const o=await fetch("/api/upload/finalize",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({session_id:u,expiration_days:b})});if(!o.ok)throw new Error("Failed to finalize upload");const B=await o.json();l({status:"completed",progress:100,fileId:B.data.file_id,downloadUrl:B.data.download_url,previewUrl:B.data.preview_url,infoUrl:B.data.info_url,expiresAt:B.data.expires_at,uploadedBytes:a.size})},[b]),pe=g.useCallback(async(a,r,l)=>{const x=new FormData;x.append("file",a),b!==null&&x.append("expiration_days",b.toString());const c=new XMLHttpRequest;return new Promise((v,w)=>{const u=Date.now();c.upload.addEventListener("progress",o=>{if(o.lengthComputable){const B=o.loaded/o.total*100,z=o.loaded/((Date.now()-u)/1e3),O=(o.total-o.loaded)/z;l({progress:B,uploadedBytes:o.loaded,speed:z,eta:O}),D(J=>{const le=J.map((S,xe)=>xe===r?{...S,progress:B,uploadedBytes:o.loaded,speed:z,eta:O}:S);return n?.(le.map(S=>({file:S.file,progress:S.progress,status:S.status,error:S.error,uploaded_bytes:S.uploadedBytes,total_bytes:S.file.size,speed:S.speed,eta:S.eta}))),J})}}),c.addEventListener("load",()=>{if(c.status===200)try{const o=JSON.parse(c.responseText);if(o.success)l({status:"completed",progress:100,fileId:o.data.file_id,downloadUrl:o.data.download_url,previewUrl:o.data.preview_url,infoUrl:o.data.info_url,expiresAt:o.data.expires_at,uploadedBytes:a.size,isDuplicate:o.data.is_duplicate,spaceSaved:o.data.space_saved}),o.data.is_duplicate&&A({title:"Duplicate File Detected",description:`This file already exists. Saved ${te(o.data.space_saved)} of storage space.`,variant:"default"}),v();else throw new Error(o.error?.message||"Upload failed")}catch(o){w(o)}else w(new Error(`HTTP ${c.status}: ${c.statusText}`))}),c.addEventListener("error",()=>{w(new Error("Network error occurred"))}),c.open("POST","/api/upload"),c.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""),c.send(x)})},[b,n,A]),L=g.useCallback(async(a,r)=>{const l=x=>{D(c=>c.map((v,w)=>w===r?{...v,...x}:v))};l({status:"uploading"});try{a.size>26214400?await ue(a,r,l):await pe(a,r,l)}catch(x){const c=x instanceof Error?x.message:"Upload failed";throw l({status:"error",error:c}),x}},[ue,pe]),ae=g.useCallback(async a=>{const r=a.map((l,x)=>x);return E(r),new Promise((l,x)=>{let c=0,v=!1;const w=async()=>{if(v)return;let u;if(D(o=>(u=r.find(B=>{const z=o[B];return z&&z.status==="pending"}),o)),u===void 0){c===a.length&&l();return}$(o=>o>=s?o:o+1);try{await L(a[u],u),c++}catch(o){v=!0,x(o);return}finally{$(o=>o-1),setTimeout(w,10)}$(o=>(o<s-1&&setTimeout(w,10),o))};for(let u=0;u<Math.min(s,a.length);u++)setTimeout(w,u*50)})},[s,L]),re=g.useCallback(async a=>{if(i||I)return;const r=Array.from(a),l=G(r);if(!l.is_valid){l.errors.forEach(c=>{A({title:"Upload Error",description:c,variant:"destructive"})}),h?.(l.errors.join(", "));return}const x=r.map(c=>({file:c,progress:0,status:"pending",uploadedBytes:0}));D(x),V(!0),t?.(r);try{f&&r.length>1?await ae(r):await Promise.all(r.map((c,v)=>L(c,v))),setTimeout(()=>{D(c=>{const v=c.filter(u=>u.status==="completed"&&u.fileId).map(u=>u.fileId),w=c.filter(u=>u.status==="completed"&&u.fileId).map(u=>({fileId:u.fileId,originalName:u.file.name,downloadUrl:u.downloadUrl,previewUrl:u.previewUrl,infoUrl:u.infoUrl,expiresAt:u.expiresAt,fileSize:u.file.size,mimeType:u.file.type,isDuplicate:u.isDuplicate,spaceSaved:u.spaceSaved}));return T(w),K(!0),N?.(v),A({title:"Upload Complete",description:`Successfully uploaded ${w.length} file(s)`,variant:"success"}),c})},100)}catch(c){const v=c instanceof Error?c.message:"Upload failed";h?.(v),A({title:"Upload Failed",description:v,variant:"destructive"})}finally{V(!1),$(0),E([])}},[i,I,G,t,h,A,f,ae,L,N]),Ue=a=>{D(r=>r.map((l,x)=>x===a?{...l,status:"cancelled"}:l))},Fe=a=>{D(r=>r.filter((l,x)=>x!==a))},De=()=>{D(a=>a.map(r=>r.status==="uploading"||r.status==="pending"?{...r,status:"cancelled"}:r)),$(0),E([])},Me=()=>{D(a=>a.filter(r=>r.status!=="completed"))},Pe=async()=>{const a=_.map((l,x)=>({state:l,index:x})).filter(({state:l})=>l.status==="error").map(({index:l})=>l);if(a.length===0)return;D(l=>l.map((x,c)=>a.includes(c)?{...x,status:"pending",progress:0,error:void 0}:x));const r=a.map(l=>_[l].file);try{f&&r.length>1?await ae(r):await Promise.all(a.map(l=>L(_[l].file,l)))}catch(l){console.error("Retry failed:",l)}},_e=g.useCallback(a=>{a.preventDefault(),a.stopPropagation(),C(!0)},[]),ze=g.useCallback(a=>{a.preventDefault(),a.stopPropagation(),C(!1)},[]),Be=g.useCallback(a=>{a.preventDefault(),a.stopPropagation()},[]),Ie=g.useCallback(a=>{a.preventDefault(),a.stopPropagation(),C(!1);const r=a.dataTransfer.files;r.length>0&&re(r)},[re]),$e=()=>{!i&&!I&&X.current?.click()},Ae=a=>{const r=a.target.files;r&&r.length>0&&re(r),a.target.value=""};return H&&R.length>0?(console.log("Showing success with files:",R),e.jsx("div",{className:k("w-full",m),children:e.jsx(ps,{files:R,onNewUpload:se,className:"space-y-6"})})):e.jsxs("div",{className:k("w-full",m),children:[e.jsxs(M,{className:k("relative cursor-pointer border-2 border-dashed transition-all duration-200","hover:border-primary/50 hover:bg-primary/5",U&&"border-primary bg-primary/10",i&&"cursor-not-allowed opacity-50",I&&"cursor-not-allowed"),style:{minHeight:"60vh"},onDragEnter:_e,onDragLeave:ze,onDragOver:Be,onDrop:Ie,onClick:$e,children:[e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-8 text-center",children:[e.jsx("div",{className:k("mb-4 rounded-full p-4 transition-colors",U?"bg-primary text-primary-foreground":"bg-muted"),children:e.jsx(Le,{className:"h-12 w-12"})}),e.jsx("h3",{className:"mb-2 text-2xl font-semibold",children:U?"Drop files here":"Upload your files"}),e.jsxs("p",{className:"mb-4 max-w-md text-muted-foreground",children:["Drag and drop files here, or click to select files.",d&&` Maximum file size: ${te(d)}`]}),e.jsxs(F,{variant:"outline",disabled:i||I,className:"mb-4",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Choose Files"]}),y&&e.jsxs("div",{className:"mb-4 flex flex-col items-center space-y-2",children:[e.jsxs(We,{htmlFor:"expiration-select",className:"flex items-center text-sm font-medium",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"File Expiration"]}),e.jsxs(He,{value:b?.toString()||"never",onValueChange:a=>ee(a==="never"?null:parseInt(a)),disabled:i||I,children:[e.jsx(Ke,{className:"w-48",children:e.jsx(Xe,{placeholder:"Select expiration"})}),e.jsxs(Ge,{className:"bg-white shadow-2xl",children:[e.jsx(Z,{value:"1",children:"1 day"}),e.jsx(Z,{value:"7",children:"7 days"}),e.jsx(Z,{value:"14",children:"14 days"}),e.jsx(Z,{value:"30",children:"30 days"})]})]})]}),j&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Allowed types: ",j.join(", ")]})]}),e.jsx("input",{ref:X,type:"file",multiple:p,onChange:Ae,className:"hidden",disabled:i||I,"aria-label":p?"Select files to upload":"Select file to upload"})]}),_.length>0&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-lg font-semibold",children:"Upload Progress"}),f&&_.length>1&&e.jsx(fs,{states:_,onCancelAll:De,onRemoveCompleted:Me,onRetryFailed:Pe})]}),f&&_.length>1&&e.jsx(gs,{states:_,activeUploads:W}),_.map((a,r)=>e.jsx(hs,{state:a,onCancel:()=>Ue(r),onRemove:()=>Fe(r)},`${a.file.name}-${r}`))]})]})},hs=({state:t,onCancel:n,onRemove:N})=>{const h=p=>{if(p===0)return"0 Bytes";const m=1024,i=["Bytes","KB","MB","GB","TB"],y=Math.floor(Math.log(p)/Math.log(m));return parseFloat((p/Math.pow(m,y)).toFixed(2))+" "+i[y]},d=p=>p?`${h(p)}/s`:"",j=p=>!p||p===1/0?"":p<60?`${Math.round(p)}s`:p<3600?`${Math.round(p/60)}m`:`${Math.round(p/3600)}h`;return e.jsxs(M,{className:"p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex min-w-0 flex-1 items-center space-x-2",children:[e.jsx(ce,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate font-medium",children:t.file.name}),e.jsx("span",{className:"flex-shrink-0 text-sm text-muted-foreground",children:h(t.file.size)}),t.isDuplicate&&e.jsxs("div",{className:"flex items-center space-x-1 rounded-full bg-blue-100 px-2 py-1 text-xs text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[e.jsx(we,{className:"h-3 w-3"}),e.jsx("span",{children:"Duplicate"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t.status==="uploading"&&e.jsx(F,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0",children:e.jsx(fe,{className:"h-4 w-4"})}),(t.status==="completed"||t.status==="error"||t.status==="cancelled")&&e.jsx(F,{variant:"ghost",size:"sm",onClick:N,className:"h-8 w-8 p-0",children:e.jsx(fe,{className:"h-4 w-4"})})]})]}),e.jsx(Ce,{value:t.progress,status:t.status==="uploading"?"loading":t.status==="completed"?"success":t.status==="error"?"error":t.status==="cancelled"?"paused":"idle",error:t.error,showPercentage:!0,animated:!0,size:"sm",info:t.status==="uploading"&&(t.speed||t.eta)?`${t.speed?d(t.speed):""} ${t.eta?`• ETA: ${j(t.eta)}`:""}`.trim():void 0,preserveProgressOnError:!0})]})},fs=({states:t,onCancelAll:n,onRemoveCompleted:N,onRetryFailed:h})=>{const d=t.some(m=>m.status==="uploading"||m.status==="pending"),j=t.some(m=>m.status==="completed"),p=t.some(m=>m.status==="error");return e.jsxs("div",{className:"flex items-center space-x-2",children:[d&&e.jsx(F,{variant:"outline",size:"sm",onClick:n,children:"Cancel All"}),j&&e.jsx(F,{variant:"outline",size:"sm",onClick:N,children:"Clear Completed"}),p&&e.jsx(F,{variant:"outline",size:"sm",onClick:h,children:"Retry Failed"})]})},gs=({states:t,activeUploads:n})=>{const N=t.length,h=t.filter(s=>s.status==="completed").length,d=t.filter(s=>s.status==="error").length,j=t.filter(s=>s.status==="uploading").length,p=t.filter(s=>s.status==="pending").length,m=t.reduce((s,f)=>s+f.file.size,0),i=t.reduce((s,f)=>s+f.uploadedBytes,0),y=m>0?i/m*100:0,P=s=>{if(s===0)return"0 Bytes";const f=1024,U=["Bytes","KB","MB","GB","TB"],C=Math.floor(Math.log(s)/Math.log(f));return parseFloat((s/Math.pow(f,C)).toFixed(2))+" "+U[C]};return e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Bulk Upload Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[h,"/",N," files completed"]})]}),e.jsx(Ce,{value:y,status:d>0?"error":j>0?"loading":h===N?"success":"idle",showPercentage:!0,animated:j>0,size:"sm"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Active uploads:"}),e.jsx("span",{className:"font-medium text-primary",children:n})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pending:"}),e.jsx("span",{className:"font-medium",children:p})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed:"}),e.jsx("span",{className:"font-medium text-green-600",children:h})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Failed:"}),e.jsx("span",{className:"font-medium text-red-600",children:d})]})]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[P(i)," / ",P(m)]}),e.jsxs("span",{children:[Math.round(y),"% complete"]})]})]})})};function $s({maxFileSize:t=100*1024*1024}){const[n,N]=g.useState([]),{toast:h}=oe(),d=i=>{h({title:"Upload Started",description:`Starting upload of ${i.length} file(s)`})},j=i=>{N(y=>[...y,...i]),h({title:"Upload Complete",description:`Successfully uploaded ${i.length} file(s)`,variant:"default"})},p=i=>{h({title:"Upload Failed",description:i,variant:"destructive"})},m=i=>{if(i===0)return"0 Bytes";const y=1024,P=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(i)/Math.log(y));return parseFloat((i/Math.pow(y,s)).toFixed(2))+" "+P[s]};return e.jsx(Je,{title:"Fucking File Hosting - Upload Files Instantly, No Registration Required",description:`Upload files up to ${m(t)} instantly with complete privacy. No registration, no tracking, no bullshit. Secure anonymous file hosting with cryptographic protection.`,image:"/images/og-upload.png",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsxs("h1",{className:"mb-4 text-4xl font-bold md:text-6xl",children:[e.jsx("span",{className:"gradient-primary-text",children:"Fucking"})," File Hosting"]}),e.jsxs("p",{className:"mx-auto mb-8 max-w-2xl text-lg text-muted-foreground md:text-xl",children:["Upload files up to ",m(t)," instantly. No registration, no tracking, no bullshit. Just blazing fast file sharing with complete privacy and download manager support."]})]}),e.jsx("div",{className:"mb-16",children:e.jsx(xs,{onUploadStart:d,onUploadComplete:j,onUploadError:p,maxFileSize:t,defaultExpirationDays:1,multiple:!0,className:"mx-auto max-w-4xl"})}),e.jsx("section",{id:"features",className:"mb-16",children:e.jsxs("div",{className:"mx-auto max-w-6xl",children:[e.jsx("h2",{className:"mb-12 text-center text-3xl font-bold",children:"Why Choose Fucking File Hosting?"}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[e.jsxs(M,{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("div",{className:"bg-gradient-primary flex h-16 w-16 items-center justify-center rounded-full",children:e.jsx(as,{className:"h-8 w-8 text-white"})})}),e.jsx("h3",{className:"mb-3 text-xl font-semibold",children:"Blazing Speed"}),e.jsx("p",{className:"text-muted-foreground",children:"No speed limits, no throttling. Upload and download at maximum speed with chunked uploads for files over 25MB. Compatible with IDM and other download managers."}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Upload Speed:"}),e.jsx("span",{className:"font-semibold text-primary",children:"Unlimited"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Download Speed:"}),e.jsx("span",{className:"font-semibold text-primary",children:"Unlimited"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Max File Size:"}),e.jsx("span",{className:"font-semibold text-primary",children:m(t)})]})]})]}),e.jsxs(M,{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("div",{className:"bg-gradient-primary flex h-16 w-16 items-center justify-center rounded-full",children:e.jsx(Ze,{className:"h-8 w-8 text-white"})})}),e.jsx("h3",{className:"mb-3 text-xl font-semibold",children:"Complete Privacy"}),e.jsx("p",{className:"text-muted-foreground",children:"Zero tracking, no IP logging, no personal data collection. Your files are secured with cryptographic IDs."}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"IP Logging:"}),e.jsx("span",{className:"font-semibold text-green-500",children:"None"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"User Tracking:"}),e.jsx("span",{className:"font-semibold text-green-500",children:"None"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Analytics:"}),e.jsx("span",{className:"font-semibold text-green-500",children:"None"})]})]})]}),e.jsxs(M,{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("div",{className:"bg-gradient-primary flex h-16 w-16 items-center justify-center rounded-full",children:e.jsx(q,{className:"h-8 w-8 text-white"})})}),e.jsx("h3",{className:"mb-3 text-xl font-semibold",children:"Radical Simplicity"}),e.jsx("p",{className:"text-muted-foreground",children:"No registration, no accounts, no complexity. Just drag, drop, and share. Get your download link instantly with preview and direct download options."}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Registration:"}),e.jsx("span",{className:"font-semibold text-green-500",children:"Not Required"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Setup Time:"}),e.jsx("span",{className:"font-semibold text-primary",children:"0 seconds"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Complexity:"}),e.jsx("span",{className:"font-semibold text-green-500",children:"Zero"})]})]})]})]})]})}),e.jsx("section",{id:"api",className:"mb-16",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsx("h2",{className:"mb-8 text-center text-3xl font-bold",children:"Developer API"}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2",children:[e.jsxs(M,{className:"p-6",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold",children:"Upload via curl"}),e.jsx("div",{className:"rounded-lg bg-secondary p-4",children:e.jsxs("code",{className:"text-sm",children:["curl -X POST \\",e.jsx("br",{}),'  -F "file=@example.pdf" \\',e.jsx("br",{}),"  ",typeof window<"u"?window.location.origin:"","/api/upload"]})}),e.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Returns JSON with file_id and download_url for immediate sharing."})]}),e.jsxs(M,{className:"p-6",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold",children:"Download Files"}),e.jsx("div",{className:"rounded-lg bg-secondary p-4",children:e.jsxs("code",{className:"text-sm",children:["curl -O \\",e.jsx("br",{}),"  ",typeof window<"u"?window.location.origin:"","/f/[file_id]"]})}),e.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Direct download with proper headers and range request support."})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(F,{variant:"outline",asChild:!0,children:e.jsx("a",{href:"/docs/api",target:"_blank",rel:"noopener noreferrer",children:"View Full API Documentation"})})})]})}),n.length>0&&e.jsx("section",{className:"mb-16",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsx("h2",{className:"mb-8 text-center text-2xl font-bold",children:"Your Recent Uploads"}),e.jsx("div",{className:"space-y-4",children:n.map(i=>e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["File ID: ",i]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Download URL: ",typeof window<"u"?window.location.origin:"","/f/",i]})]}),e.jsx(F,{variant:"outline",asChild:!0,children:e.jsx("a",{href:`/file/${i}`,target:"_blank",rel:"noopener noreferrer",children:"View Details"})})]})},i))})]})})]})})}export{$s as default};
